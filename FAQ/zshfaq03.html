<!DOCTYPE html><html><head>
<meta charset="UTF-8">
<title> Z-Shell Frequently-Asked Questions </title>
<style type="text/css">
    figure {text-align: center;}
    img {vertical-align: center;}
</style>
</head>
<body >
<hr>
<ul>
    <li> <a href="zshfaq.html">Table of Contents</a>
    <li> <a href="zshfaq02.html">Previous Chapter</a>
    <li> <a href="zshfaq04.html">Next Chapter</a>
</ul>
<hr>
<a name="l18"></a>
<h1>Chapter 3: How to get various things to work</h1>
<p>
<a name="l19"></a>
<h2>3.1: Why does <code>$var</code> where <code>var="foo bar"</code> not do what I expect?</h2>
<a name="31"></a>
<p>
In most Bourne-shell derivatives, multiple-word variables such as
  <pre>

    var="foo bar"
  
</pre>

  are split into words when passed to a command or used in a <code>for foo in
  $var</code> loop.  By default, zsh does not have that behaviour: the
  variable remains intact.  (This is not a bug!  See below.)  The option
  <code>SH_WORD_SPLIT</code> exists to provide compatibility.
<p>
For example, defining the function args to show the number of its
  arguments:
  <pre>

    args() { echo $#; }
  
</pre>

  and with our definition of `var',
  <pre>

    args $var
  
</pre>

  produces the output `1'.  After
  <pre>

    setopt shwordsplit
  
</pre>

  the same function produces the output `2', as with sh and ksh.
<p>
Unless you need strict sh/ksh compatibility, you should ask yourself
  whether you really want this behaviour, as it can produce unexpected
  effects for variables with entirely innocuous embedded spaces.  This
  can cause horrendous quoting problems when invoking scripts written
  for other shells (see <a href="zshfaq02.html#28">2.8</a>).  The natural way to produce
  word-splitting behaviour in zsh is via arrays.  For example,
  <pre>

    set -A array one two three twenty
  
</pre>

  (or
  <pre>

    array=(one two three twenty)
  
</pre>

  if you prefer), followed by
  <pre>

    args $array
  
</pre>

  produces the output `4', regardless of the setting of <code>SH_WORD_SPLIT</code>.
  Arrays are also much more versatile than single strings.  Probably
  if this mechanism had always been available there would never have
  been automatic word splitting in scalars, which is a sort of
  uncontrollable poor man's array.
<p>
Note that word splitting happens regardless of the value of the internal field
  separator, <code>$IFS</code>; in other words, with <code>IFS=:; foo=a:b; args $foo</code>
  you get the answer 1.
<p>
Other ways of causing word splitting include a judicious use of
  `eval':
  <pre>

    sentence="Longtemps, je me suis couch\+NOTRANS(&amp;eacute;) de bonne heure."
    eval "words=($sentence)"
  
</pre>

  after which $words is an array with the words of $sentence (note
  characters special to the shell, such as the <code>'</code> in this example,
  must already be quoted), or, less standard but more reliable,
  turning on <code>SH_WORD_SPLIT</code> for one variable only:
  <pre>

    args ${=sentence}
  
</pre>

  always returns 8 with the above definition of <code>args</code>.  (In older
  versions of zsh, <code>${=foo}</code> toggled <code>SH_WORD_SPLIT</code>; now it forces it on.)
<p>
Note also the <code>"$@"</code> method of word splitting is always available in zsh
  functions and scripts (though strictly this does array splitting, not
  word splitting).  This is more portable than the <code>$*</code>, since it
  will work regardless of the <code>SH_WORD_SPLIT</code> setting; the other
  difference is that <code>$*</code> removes empty arguments from the array.
  You can fix the first half of that objection by using <code>${==*}</code>,
  which turns off <code>SH_WORD_SPLIT</code> for the duration of the expansion.
<p>
<code>SH_WORD_SPLIT</code> is set when zsh is invoked with the names `ksh' or `sh',
  or (entirely equivalent) when <code>emulate ksh</code> or <code>emulate sh</code> is in
  effect.
<p>
There used to be another effect of word splitting which differed between ksh
  and zsh.  In ksh, the builtin commands that declare parameters such
  as <code>typeset</code> and <code>export</code> force word-splitting not to take place
  after on an assignment argument:
  <pre>

    typeset param=`echo foo bar`
  
</pre>

  in ksh will create a parameter with value <code>foo bar</code>.
<p>
zsh used to
  create a parameter <code>param</code> with value <code>foo</code> and a parameter <code>bar</code>
  whose value was empty.  Contrast this with a normal assignment (no
  <code>typeset</code> or other command in front), which never causes a word split
  unless you have <code>GLOB_ASSIGN</code> set.
<p>
zsh version 4.0.2 and newer creates a single parameter with value
  <code>foo bar</code>, like ksh does, when the option <code>KSH_TYPESET</code> is set.
  This option gets set automatically when in ksh compatibility mode.
<p>
zsh 5.1 and newer create a single parameter with value <code>foo bar</code> by
  default, in both compatibility and native modes. The older behaviour
  can be obtained with <code>disable -r typeset</code>.
<p>
If the options <code>MAGIC_EQUAL_SUBST</code> and <code>KSH_TYPESET</code> are both
  set, arguments that look like assignments will not undergo word
  splitting, whatever the command name.
<p>
<a name="l20"></a>
<h2>3.2: In which startup file do I put...?</h2>
<p>
When zsh starts up, there are four files you can change which it will
  run under various circumstances: <code>.zshenv</code>, <code>.zprofile</code>, <code>.zshrc</code>
  and <code>.zlogin</code>.  They are usually in your home directory, but the
  variable <code>$ZDOTDIR</code> may be set to alter that.  Here are a few simple
  hints about how to use them.  There are also files which the system
  administrator can set for all shells; you can avoid running all except
  <code>/etc/zshenv</code> by starting zsh with the <code>-f</code> option --- for this
  reason it is important for administrators to make sure <code>/etc/zshenv</code>
  is as brief as possible.
<p>
The order in which the four files are searched (none of them
  <em>need</em> to exist) is the one just given.  However, <code>.zprofile</code>
  and <code>.zlogin</code> are only run when the shell is a login shell --- when
  you first login, of course, and whenever you start zsh with the <code>-l</code>
  option.  The order is the only difference between those; you should
  decide whether you need things set before or after <code>.zshrc</code>.  These
  files are a good place to set environment variables (i.e. <code>export</code>
  commands), since they are passed on to all shells without you having
  to set them again, and also to check that your terminal is set up
  properly (except that if you want to change settings for terminal
  emulator windows like <code>xterm</code> you will need to put those in
  <code>.zshrc</code>, since usually you do not get a login shell here).
<p>
Login shells are often interactive, but this is not necessarily the
  case.  It is the programme that starts the shell that decides if it is
  to be a login shell, and it is not required that the shell be run
  interactively.  A possible example is a display manager that starts a
  shell to initialise your environment before running the window manager
  to create terminals: it might run this as a login shell but with no
  terminal, so it is not interactive.
<p>
The only file you can alter which is started with every zsh (unless
  you use the <code>-f</code> option) is <code>.zshenv</code>, so this is a good place to put
  things you want even if the shell is non-interactive: options for
  changing the syntax, like <code>EXTENDED_GLOB</code>, any changes to set with
  <code>limit</code>, any more variables you want to make sure are set as for
  example <code>$fpath</code> to find functions.  You almost certainly do not
  want <code>.zshenv</code> to produce any output.  Some people prefer not to
  use <code>.zshenv</code> for setting options, as this affects scripts; but
  making zsh scripts portable usually requires special handling anyway.
<p>
Finally, <code>.zshrc</code> is run for every interactive shell; that includes
  login shells, but also any other time you start up a shell, such as
  simply by typing <code>zsh</code> or opening a new terminal emulator window.
  This file is the place to change the editing behaviour via options or
  <code>bindkey</code>, control how your history is saved, set aliases unless
  you want to use them in scripts too, and for any other clutter which
  can't be exported but you only use when interacting directly with the
  shell.  You probably don't want <code>.zshrc</code> to produce output, either,
  since there are occasions when this can be a problem, such as when
  using <code>rsh</code> from another host.  See <a href="zshfaq03.html#321">3.21</a> for what to put in <code>.zshrc</code>
  to save your history.
<p>
<a name="l21"></a>
<h2>3.3: What is the difference between `export' and the <code>ALL_EXPORT</code> option?</h2>
<p>
Normally, you would put a variable into the environment by using
  <code>export var</code>.  The command <code>setopt allexport</code> causes all
  variables which are subsequently set (N.B. not all the ones which
  already exist) to be put into the environment.
<p>
This may seem a useful shorthand, but in practice it can have
  unhelpful side effects:
  <ol>
  <li> Since every variable is in the environment as well as remembered
     by the shell, the memory for it needs to be allocated twice.
     This is bigger as well as slower.
  <li> It really is <strong>every</strong> variable which is exported, even loop
     variables in <code>for</code> loops.  This is probably a waste.
  <li> An arbitrary variable created by the user might have a special
     meaning to a command.  Since all shell variables are visible to
     commands, there is no protection against this.
  </ol>
  For these reasons it is usually best to avoid <code>ALL_EXPORT</code> unless you
  have a specific use for it.  One safe use is to set it before
  creating a list of variables in an initialisation file, then unset
  it immediately afterwards.  Only those variables will be automatically
  exported.
<p>
<a name="l22"></a>
<h2>3.4: How do I turn off spelling correction/globbing for a single command?</h2>
<p>
In the first case, you presumably have <code>setopt correctall</code> in an
  initialisation file, so that zsh checks the spelling of each word in
  the command line.  You probably do not want this behaviour for
  commands which do not operate on existing files.
<p>
The answer is to alias the offending command to itself with
  <code>nocorrect</code> stuck on the front, e.g.
  <pre>

    alias mkdir='nocorrect mkdir'
  
</pre>

<p>
To turn off globbing, the rationale is identical:
  <pre>

    alias mkdir='noglob mkdir'
  
</pre>

  You can have both <code>nocorrect</code> and <code>noglob</code>, if you like, but the
  <code>nocorrect</code> must come first, since it is needed by the line editor,
  while <code>noglob</code> is only handled when the command is examined.
<p>
Note also that a shell function won't work: the no... directives must
  be expanded before the rest of the command line is parsed.
<p>
<a name="l23"></a>
<h2>3.5: How do I get the Meta key to work on my xterm?</h2>
<a name="35"></a>
<p>
The Meta key isn't present on a lot of keyboards, but on some
  the Alt key has the same effect.  If a character is typed on the
  keyboard while the Meta key is held down, the characters is sent
  as terminal input with its eighth bit set.  For example, ASCII
  <code>A</code>, hex 65, becomes hex E5.  This is sometimes used to provide
  extra editing commands.
<p>
As stated in the manual, zsh needs to be told about the Meta key by
  using <code>bindkey -me</code> or <code>bindkey -mv</code> in your .zshrc or on the
  command line.  You probably also need to tell the terminal driver to
  allow the `Meta' bit of the character through; <code>stty pass8</code> is the
  usual incantation.  Sample .zshrc entry:
  <pre>

    [[ $TERM = "xterm" ]] &amp;&amp; stty pass8 &amp;&amp; bindkey -me
  
</pre>

  or, on SYSVR4-ish systems without pass8,
  <pre>

    [[ $TERM = "xterm" ]] &amp;&amp; stty -parenb -istrip cs8 &amp;&amp; bindkey -me
  
</pre>

  (disable parity detection, don't strip high bit, use 8-bit characters).
  Make sure this comes <em>before</em> any bindkey entries in your .zshrc which
  redefine keys normally defined in the emacs/vi keymap.  You may also
  need to set the <code>eightBitOutput</code> resource in your <code>~/.Xdefaults</code>
  file, although this is on by default and it's unlikely anybody will
  have tinkered with it.
<p>
You don't need the <code>bindkey</code> to be able to define your own sequences
  with the Meta key, though you still need the <code>stty</code>.
<p>
If you are using multibyte input directly from the keyboard you
  probably don't want to use this feature since the eighth bit in
  each byte is used to indicate a part of a multibyte character.  See
  <a href="zshfaq05.html#c5">chapter 5</a>.
<p>
<a name="l24"></a>
<h2>3.6: How do I automatically display the directory in my xterm title bar?</h2>
<p>
You should use the special function <code>chpwd</code>, which is called when
  the directory changes.  The following checks that standard output is
  a terminal, then puts the directory in the title bar if the terminal
  is an <code>xterm</code> or some close relative, or a <code>sun-cmd</code>.
<p>
<pre>

  chpwd() {
    [[ -t 1 ]] || return
    case $TERM in
      sun-cmd) print -Pn "\e]l%~\e\\"
        ;;
      *xterm*|rxvt|(dt|k|E)term) print -Pn "\e]2;%~\a"
        ;;
    esac
  }
  
</pre>

<p>
Change <code>%~</code> if you want the message to be different.  (The <code>-P</code>
  option interprets such sequences just like in prompts, in this case
  producing the current directory; you can of course use <code>$PWD</code> here,
  but that won't use the <code>~</code> notation which I find clearer.)  Note that
  when the <code>xterm</code> starts up you will probably want to call <code>chpwd</code>
  directly: just put <code>chpwd</code> in <code>.zshrc</code> after it is defined or autoloaded.
<p>
<a name="l25"></a>
<h2>3.7: How do I make the completion list use eight bit characters?</h2>
<p>
If you are sure your terminal handles this, the easiest way from versions
  3.0.6 and 3.1 of the shell is to set the option <code>PRINT_EIGHT_BIT</code>.  In
  principle, this will work automatically if your computer uses the
  `locale' system and your locale variables are set properly, as zsh
  understands this.  However, it is quite complicated, so if it isn't
  already set up, trying the option is a lot easier.  For earlier versions
  of zsh 3, you are stuck with trying to understand locales, see the
  <code>setlocale(3)</code> and <code>zshparam(1)</code> manual pages: the simplest
  possibility may be to set <code>LC_ALL=en_US</code>.  For older versions of the
  shell, there is no easy way out.
<p>
<a name="l26"></a>
<h2>3.8: Why do the cursor (arrow) keys not work?  (And other terminal oddities.)</h2>
<p>
The cursor keys send different codes depending on the terminal; zsh
  only binds the most well known versions.  If you see these problems,
  try putting the following in your <code>.zshrc</code>:
<p>
<pre>

    bindkey "$(echotc kl)" backward-char
    bindkey "$(echotc kr)" forward-char
    bindkey "$(echotc ku)" up-line-or-history
    bindkey "$(echotc kd)" down-line-or-history
  
</pre>

<p>
If you use vi mode, use <code>vi-backward-char</code> and <code>vi-forward-char</code>
  where appropriate.  As of version 4.0.1, zsh attempts to look up these
  codes and to set the key bindings for you (both emacs and vi), but in
  some circumstances this may not work.
<p>
Note, however, that up to version 3.0 binding arbitrary multiple key
  sequences can cause problems, so check that this works with your set
  up first.  Also, from version 3.1.3, more sequences are supported by
  default, namely those in the form <code>&lt;ESC&gt;O</code> followed by <code>A</code>,
  <code>B</code>, <code>C</code> or <code>D</code>, as well as the corresponding set beginning
  <code>&lt;ESC&gt;[</code>, so this may be redundant.
<p>
A particular problem which sometimes occurs is that there are two
  different modes for arrow keys, normal mode and keypad mode, which
  send different sequences.  Although this is largely a historical
  artifact, it sometimes happens that your terminal can be switched from
  one mode to the other, for example by a rogue programme that sends the
  sequence to switch one way, but not the sequence to switch back.  Thus
  you are stuck with the effects.  Luckily in this case the arrow key
  sequences are likely to be standard, and you can simply bind both sets.
  The following code does this.
  <pre>

    bindkey '\e[A'  up-line-or-history
    bindkey '\e[B'  down-line-or-history
    bindkey '\e[C'  forward-char
    bindkey '\e[D'  backward-char
    bindkey '\eOA'  up-line-or-history
    bindkey '\eOB'  down-line-or-history
    bindkey '\eOC'  forward-char
    bindkey '\eOD'  backward-char
  
</pre>

  For most even vaguely VT100-compatible terminals, the above eight
  instructions are a fairly safe bet for your <code>.zshrc</code>.  Of course
  you can substitute variant functions for the second argument here too.
<p>
It should be noted that the <code>O</code> / <code>[</code> confusion can occur
  with other keys such as Home and End.  Some systems let you query
  the key sequences sent by these keys from the system's terminal
  database, terminfo.  Unfortunately, the key sequences given there
  typically apply to the mode that is not the one zsh uses by default (it's
  the "application" mode rather than the "raw" mode).  Explaining the use
  of terminfo is outside the scope of this FAQ, but if you wish to use the
  key sequences given there you can tell the line editor to turn on
  "application" mode when it starts and turn it off when it stops:
  <pre>

    function zle-line-init () { echoti smkx }
    function zle-line-finish () { echoti rmkx }
    zle -N zle-line-init
    zle -N zle-line-finish
  
</pre>

  If you only have the predecessor to terminfo, called termcap (which is
  what we used to get the cursor keys above), replace <code>echoti smkx</code>
  with <code>echotc ks</code> and replace <code>echoti rmkx</code> with <code>echotc ke</code>.
<p>
<a name="l27"></a>
<h2>3.9: Why does my terminal act funny in some way?</h2>
<p>
If you are using an OpenWindows cmdtool as your terminal, any
  escape sequences (such as those produced by cursor keys) will be
  swallowed up and never reach zsh.  Either use shelltool or avoid
  commands with escape sequences.  You can also disable scrolling from
  the cmdtool pane menu (which effectively turns it into a shelltool).
  If you still want scrolling, try using an xterm with the scrollbar
  activated.
<p>
If that's not the problem, and you are using stty to change some tty
  settings, make sure you haven't asked zsh to freeze the tty settings:
  type
  <pre>

    ttyctl -u
  
</pre>

  before any stty commands you use.
<p>
On the other hand, if you aren't using stty and have problems you may
  need the opposite:  <code>ttyctl -f</code> freezes the terminal to protect it
  from hiccups introduced by other programmes (kermit has been known to
  do this).
<p>
A problem I have experienced myself (on an AIX 3.2 workstation with
  xterm) is that termcap deinitialization sequences sent by `less'
  were causing automargins to be turned off --- not actually a shell
  problem, but you might have thought it was.  The fix is to put `<code>X</code>'
  into the environment variable <code>LESS</code> to stop the sequences being sent.
  Other programs (though not zsh) may also send that sequence.
<p>
If <em>that</em>'s not the problem, and you are having difficulties with
  external commands (not part of zsh), and you think some terminal
  setting is wrong (e.g. <code>^V</code> is getting interpreted as `literal next
  character' when you don't want it to be), try
  <pre>

    ttyctl -u
    STTY='lnext "^-"' commandname
  
</pre>

  (in this example).  Note that zsh doesn't reset the terminal completely
  afterwards: just the modes it uses itself and a number of special
  processing characters (see the <code>stty(1)</code> manual page).
<p>
<a name="l28"></a>
<h2>3.10: Why does zsh not work in an Emacs shell mode any more?</h2>
<p>
(This information comes from Bart Schaefer and other zsh-workers.)
<p>
Emacs 19.29 or thereabouts stopped using a terminal type of "emacs"
  in shell buffers, and instead sets it to "dumb".  Zsh only kicks in
  its special I'm-inside-emacs initialization when the terminal type
  is "emacs".
<p>
Probably the most reliable way of dealing with this is to look for
  the environment variable <code>$EMACS</code>, which is set to <code>t</code> in
  Emacs' shell mode.  Putting
  <pre>

    [[ $EMACS = t ]] &amp;&amp; unsetopt zle
  
</pre>

  in your .zshrc should be sufficient.
<p>
Another method is to put
  <pre>

    #!/bin/sh
    TERM=emacs exec zsh
  
</pre>

  into a file ~/bin/eshell, then <code>chmod +x ~/bin/eshell</code>, and
  tell emacs to use that as the shell by adding
  <pre>

    (setenv "ESHELL" (expand-file-name "~/bin/eshell"))
  
</pre>

  to ~/.emacs.
<p>
<a name="l29"></a>
<h2>3.11: Why do my autoloaded functions not autoload [the first time]?</h2>
<p>
The problem is that there are two possible ways of autoloading a
  function (see the AUTOLOADING FUNCTIONS section of the zsh manual
  page zshmisc for more detailed information):
  <ol>
  <li> The file contains just the body of the function, i.e.
     there should be no line at the beginning saying <code>function foo {</code>
     or <code>foo () {</code>, and consequently no matching <code>}</code> at the end.
     This is the traditional zsh method.  The advantage is that the
     file is called exactly like a script, so can double as both.
     To define a function <code>xhead () { print -n "\033]2;$*\a"; }</code>,
     the file would just contain <code>print -n "\033]2;$*\a"</code>.  
  <li> The file contains the entire definition, and maybe even
     other code:  it is run when the function needs to be loaded, then
     the function itself is called up.  This is the method in ksh.
     To define the same function <code>xhead</code>, the whole of the
     usual definition should be in the file.
  </ol>
<p>
In old versions of zsh, before 3.0, only the first behaviour was
  allowed, so you had to make sure the file found for autoload just
  contained the function body.  You could still define other functions
  in the file with the standard form for definitions, though they
  would be redefined each time you called the main function.
<p>
In version 3.0.x, the second behaviour is activated if the file
  defines the autoloaded function.  Unfortunately, this is
  incompatible with the old zsh behaviour which allowed you to
  redefine the function when you called it.
<p>
From version 3.1, there is an option <code>KSH_AUTOLOAD</code> to allow full ksh
  compatibility, i.e. the function <em>must</em> be in the second form
  above.  If that is not set, zsh tries to guess which form you are
  using:  if the file contains only a complete definition of the
  function in the second form, and nothing else apart from comments
  and whitespace, it will use the function defined in the file;
  otherwise, it will assume the old behaviour.  The option is set
  if <code>emulate ksh</code> is in effect, of course.
<p>
(A neat trick to autoload all functions in a given directory is to
  include a line like <code>autoload ~/fns/*(:t)</code> in .zshrc; the bit in
  parentheses removes the directory part of the filenames, leaving
  just the function names.)
<p>
<a name="l30"></a>
<h2>3.12: How does base arithmetic work?</h2>
<p>
The ksh syntax is now understood, i.e.
  <pre>

    let 'foo = 16#ff'
  
</pre>

  or equivalently
  <pre>

    (( foo = 16#ff ))
  
</pre>

  or even
  <pre>

    foo=$((16#ff))
  
</pre>

  The original syntax was
  <pre>

    (( foo = [16]ff ))
  
</pre>

  --- this was based on a misunderstanding of the ksh manual page.  It
  still works but its use is deprecated.  Then
  <pre>

    echo $foo
  
</pre>

  gives the answer `255'.  It is possible to declare variables explicitly
  to be integers, via
  <pre>

    typeset -i foo
  
</pre>

  which has a different effect: namely the base used in the first
  assignment (hexadecimal in the example) is subsequently used whenever
  `foo' is displayed (although the internal representation is unchanged).
  To ensure foo is always displayed in decimal, declare it as
  <pre>

    typeset -i 10 foo
  
</pre>

  which requests base 10 for output.  You can change the output base of an
  existing variable in this fashion.  Using the <code>$(( ... ))</code> method will
  always display in decimal, except that in 3.1.9 there is a new feature
  for selecting a base for displaying here:
  <pre>

    print $(( [#16] 255 ))
  
</pre>

<p>
<a name="l31"></a>
<h2>3.13: How do I get a newline in my prompt?</h2>
<a name="313"></a>
<p>
You can place a literal newline in quotes, i.e.
  <pre>

    PROMPT="Hi Joe,
    what now?%# "
  
</pre>

  If you have the bad taste to set the option cshjunkiequotes, which
  inhibits such behaviour, you will have to bracket this with
  <code>unsetopt cshjunkiequotes</code> and <code>setopt cshjunkiequotes</code>, or put it
  in your <code>.zshrc</code> before the option is set.
<p>
In recent versions of zsh (not 3.0), there is a form of quoting which
  interprets print sequences like `<code>\n</code>' but otherwise acts like single
  quotes: surround the string with <code>$'...'</code>.  Hence:
  <pre>

    PROMPT=$'Hi Joe,\nwhat now?%# '
  
</pre>

  is a neat way of doing what you want.  Note that it is the quotes, not
  the prompt expansion, which turns the `<code>\n</code>' into a newline.
<p>
<a name="l32"></a>
<h2>3.14: Why does <code>bindkey ^a command-name</code> or <code>stty intr ^-</code> do something funny?</h2>
<p>
You probably have the extendedglob option set in which case <code>^</code> and <code>#</code>
  are metacharacters.  <code>^a</code> matches any file except one called <code>a</code>, so the
  line is interpreted as bindkey followed by a list of files.  Quote the
  <code>^</code> with a backslash or put quotation marks around <code>^a</code>.
  See <a href="zshfaq03.html#327">3.27</a> if you want to know more about the pattern
  character <code>^</code>.
<p>
<a name="l33"></a>
<h2>3.15: Why can't I bind <code>\C-s</code> and <code>\C-q</code> any more?</h2>
<p>
The control-s and control-q keys now do flow control by default,
  unless you have turned this off with <code>stty -ixon</code> or redefined the
  keys which control it with <code>stty start</code> or <code>stty stop</code>.  (This is
  done by the system, not zsh; the shell simply respects these
  settings.)  In other words, <code>\C-s</code> stops all output to the terminal,
  while <code>\C-q</code> resumes it.
<p>
There is an option <code>NO_FLOW_CONTROL</code> to stop zsh from allowing flow
  control and hence restoring the use of the keys: put <code>setopt
  noflowcontrol</code> in your <code>.zshrc</code> file.
<p>
<a name="l34"></a>
<h2>3.16: How do I execute command <code>foo</code> within function <code>foo</code>?</h2>
<p>
The command <code>command foo</code> does just that.  You don't need this with
  aliases, but you do with functions.  Note that error messages like
  <pre>

    zsh: job table full or recursion limit exceeded
  
</pre>

  are a good sign that you tried calling `foo' in function `foo' without
  using `command'.  If <code>foo</code> is a builtin rather than an external
  command, use <code>builtin foo</code> instead.
<p>
<a name="l35"></a>
<h2>3.17: Why do history substitutions with single bangs do something funny?</h2>
<p>
If you have a command like "<code>echo !-2:$ !$</code>", the first history
  substitution then sets a default to which later history substitutions
  with single unqualified bangs refer, so that !$ becomes equivalent to
  <code>!-2:$</code>.  The option <code>CSH_JUNKIE_HISTORY</code> makes all single bangs refer
  to the last command.
<p>
<a name="l36"></a>
<h2>3.18: Why does zsh kill off all my background jobs when I logout?</h2>
<p>
Simple answer: you haven't asked it not to.  Zsh (unlike [t]csh) gives
  you the option of having background jobs killed or not: the <code>nohup</code>
  option exists if you don't want them killed.  Note that you can always
  run programs with <code>nohup</code> in front of the pipeline whether or not the
  option is set, which will prevent that job from being killed on
  logout.  (<code>nohup</code> is actually an external command.)
<p>
The <code>disown</code> builtin is very useful in this respect: if zsh informs
  you that you have background jobs when you try to logout, you can
  <code>disown</code> all the ones you don't want killed when you exit.  This is
  also a good way of making jobs you don't need the shell to know about
  (such as commands which create new windows) invisible to the shell.
  Likewise, you can start a background job with <code>&amp;!</code> instead of just
  <code>&amp;</code> at the end, which will automatically disown the job.
<p>
<a name="l37"></a>
<h2>3.19: How do I list all my history entries?</h2>
<p>
Tell zsh to start from entry 1: <code>history 1</code>.  Those entries at the
  start which are no longer in memory will be silently omitted.
<p>
<a name="l38"></a>
<h2>3.20: How does the alternative loop syntax, e.g. <code>while {...} {...}</code> work?</h2>
<p>
Zsh provides an alternative to the traditional sh-like forms with <code>do</code>,
  <pre>

    while TEST; do COMMANDS; done
  
</pre>

  allowing you to have the COMMANDS delimited with some other command
  structure, often <code>{...}</code>.  The rules are quite complicated and
  in most scripts it is probably safer --- and certainly more
  compatible --- to stick with the sh-like rules.  If you are
  wondering, the following is a rough guide.
<p>
To make it work you must make sure the TEST itself is clearly
  delimited.  For example, this works:
  <pre>

    while (( i++ &lt; 10 )) { echo i is $i; }
  
</pre>

  but this does <em>not</em>:
  <pre>

    while let "i++ &lt; 10"; { echo i is $i; }   # Wrong!
  
</pre>

  The reason is that after <code>while</code>, any sort of command list is valid.
  This includes the whole list <code>let "i++ &lt; 10"; { echo i $i; }</code>;
  the parser simply doesn't know when to stop.  Furthermore, it is
  wrong to miss out the semicolon, as this makes the <code>{...}</code> part
  of the argument to <code>let</code>.  A newline behaves the same as a
  semicolon, so you can't put the brace on the next line as in C.
<p>
So when using this syntax, the test following the <code>while</code> must
  be wrapped up:  any of <code>((...))</code>, <code>[[...]]</code>, <code>{...}</code> or
  <code>(...)</code> will have this effect.  (They have their usual syntactic
  meanings too, of course; they are not interchangeable.)  Note that
  here too it is wrong to put in the semicolon, as then the case
  becomes identical to the preceding one:
  <pre>

    while (( i++ &lt; 10 )); { echo i is $i; }   # Wrong!
  
</pre>

<p>
The same is true of the <code>if</code> and <code>until</code> constructs:
  <pre>

    if { true } { echo yes } else { echo no }
  
</pre>

  but with <code>for</code>, which only needs a list of words, you can get
  away with it:
  <pre>

    for foo in a b; { echo foo is $a; bar=$foo; }
  
</pre>

  since the parser knows it only needs everything up to the first
  semicolon. For the same reason, there is no problem with the <code>repeat</code>,
  <code>case</code> or <code>select</code> constructs; in fact, <code>repeat</code> doesn't even
  need the semicolon since it knows the repeat count is just one word.
<p>
This is independent of the behaviour of the SHORTLOOPS option (see
  manual), which you are in any case encouraged even more strongly not
  to use in programs as it can be very confusing.
<p>
<a name="l39"></a>
<h2>3.21: Why is my history not being saved?</h2>
<a name="321"></a>
<p>
In zsh, you need to set three variables to make sure your history is
  written out when the shell exits.  For example,
  <pre>

    HISTSIZE=200
    HISTFILE=~/.zsh_history
    SAVEHIST=200
  
</pre>

  <code>$HISTSIZE</code> tells the shell how many lines to keep internally,
  <code>$HISTFILE</code> tells it where to write the history, and <code>$SAVEHIST</code>,
  the easiest one to forget, tells it how many to write out.  The
  simplest possibility is to set it to the same as <code>$HISTSIZE</code> as
  above.  There are also various options affecting history; see the
  manual.
<p>
<a name="l40"></a>
<h2>3.22: How do I get a variable's value to be evaluated as another variable?</h2>
<p>
The problem is that you have a variable <code>$E</code> containing the string
  <code>EDITOR</code>, and a variable <code>$EDITOR</code> containing the string <code>emacs</code>,
  or something such.  How do you get from <code>$E</code> to emacs in one easy
  stage?
<p>
There is no standard single-stage way of doing this.  However, there
  is a zsh idiom (available in all versions of zsh since 3.0) for this:
  <pre>

    print ${(e)E:+\$$E}
  
</pre>

  Ignore the <code>(e)</code> for now.  The <code>:+</code> means: if the variable
  <code>$E</code> is set, substitute the following, i.e. <code>\$$E</code>.  This is
  expanded to <code>$EDITOR</code> by the normal rules.  Finally, the <code>(e)</code> means
  `evaluate the expression you just made'.  This gives <code>emacs</code>.
<p>
For a standard shell way of doing this, you are stuck with <code>eval</code>:
  <pre>

    eval echo \$$E
  
</pre>

  produces the same result.
<p>
Versions since 3.1.6 allow you to do this directly with a new flag;
  <code>${(P)E}</code>.
<p>
As a slight aside, sometimes people note that the syntax <code>${${E}}</code>
  is valid and expect it to have this effect.  It probably ought to, but
  in the early days of zsh it was found convenient to have this way of
  producing different substitutions on the same parameter; for example,
  <code>${${file##**/}%.*}</code> removes everything up to the last slash in
  <code>$file</code>, then everything from the last dot on, inclusive (try
  it, this works).  So in <code>${${E}}</code>, the internal <code>${...}</code>
  actually does nothing.
<p>
<a name="l41"></a>
<h2>3.23: How do I prevent the prompt overwriting output when there is no newline?</h2>
<p>
The problem is normally limited to zsh versions prior to 4.3.0 due to the
  advent of the PROMPT_SP option (which is enabled by default, and eliminates
  this problem for most terminals).  An example of the overwriting is:
  <pre>

    % echo -n foo
    % 
  
</pre>

  This shows a case where the word <code>foo</code> was output without a newline, and
  then overwritten by the prompt line <code>%</code>.  The reason this happens is that
  the option <code>PROMPT_CR</code> is enabled by default, and it outputs a carriage
  return before the prompt in order to ensure that the line editor knows what
  column it is in (this is needed to position the right-side prompt correctly
  (<code>$RPROMPT</code>, <code>$RPS1</code>) and to avoid screen corruption when performing
  line editing).  If you add <code>unsetopt promptcr</code> to your <code>.zshrc</code>, you
  will see any partial output, but your screen may look weird until you press
  return or refresh the screen.
<p>
A better solution than disabling PROMPT_CR (for most terminals) is adding
  a simpler version of the PROMPT_SP functionality to an older zsh using a
  custom precmd function, like this one:
  <pre>

    # Skip defining precmd if the PROMPT_SP option is available.
    if ! eval '[[ -o promptsp ]] 2&gt;/dev/null'; then
      function precmd {
        # Output an inverse char and a bunch spaces.  We include
        # a CR at the end so that any user-input that gets echoed
        # between this output and the prompt doesn't cause a wrap.
        print -nP "%B%S%#%s%b${(l:$((COLUMNS-1)):::):-}\r"
      }
    fi
  
</pre>

  That precmd function will only bump the screen down to a new line if there
  was output on the prompt line, otherwise the extra chars get removed by
  the PROMPT_CR action.  Although this typically looks fine, it may result
  in the spaces preceding the prompt being included when you select a line
  of preserved text with the mouse.
<p>
One final alternative is to put a newline in your prompt -- see question
  <a href="zshfaq03.html#313">3.13</a> for that.
<p>
<a name="l42"></a>
<h2>3.24: What's wrong with cut and paste on my xterm?</h2>
<p>
On the majority of modern UNIX systems, cutting text from one window and
  pasting it into another should work fine.  On a few, however, there are
  problems due to issues about how the terminal is handled:  most programs
  expect the terminal to be in `canonical input mode', which means that the
  program is passed a whole line of input at a time, while for editing
  the shell needs a single character at a time and must be in
  `non-canonical input mode'.  On the systems in question, input can be
  lost or re-ordered when the mode changes.  There are actually two
  slightly different problems:
  <ol>
  <li> When you paste something in while a programme is running, so that
     the shell only retrieves it later.  Traditionally, there was a test
     which was used only on systems where the problem was known to exist,
     so it is possible some other systems were not handled (for example,
     certain versions of IRIX, it appears); also, continuation lines were
     not handled properly.  A more reliable approach appears from versions
     3.0.6 and 3.1.6.
  <li> When the shell is waiting for input, and you paste in a chunk of
     text consisting of more than one complete set of commands.
     Unfortunately, this is a much harder problem: the line editor is
     already active, and needs to be turned off when the first command is
     executed.  The shell doesn't even know if the remaining text is input
     to a command or for the shell, so there's simply nothing it can do.
<p>
However, if you have problems you can trick it: type `<code>{</code>' on a line
     by itself, then paste the input, then type `<code>}</code>' on a line by
     itself.  The shell will not execute anything until the final brace is
     read; all input is read as continuation lines (this may require the
     fixes referred to above in order to be reliable).
<p>
As of 5.1, this trick is not necessary on terminal emulators that
     support the <em>bracketed paste</em> feature (this includes most modern
     terminal emulators).  See the description of <code>$zle_bracketed_paste</code>
     in the <code>zshparam</code> manual page for details.
  </ol>
<p>
<a name="l43"></a>
<h2>3.25: How do I get coloured prompts on my colour xterm?</h2>
<p>
(Or `color xterm', if you're reading this in black and white.)
<p>
Versions of the shell starting with the 4.3 series have this
  built in.  Use
  <pre>

    PS1='%K{white}%F{red}&lt;red on white&gt;%f%k&lt;default colours&gt;'
  
</pre>

  to change the prompt.  Names are only usable for the colours
  black, red, green, yellow, blue, magenta, cyan and white, understood
  by most terminals, but if you happen to know the details of how
  your terminal implements colours you can specify a number, e.g.
  <code>%20F</code> to turn the foreground into colour number 20. <code>echotc
  Co</code> will often output the number of colours the terminal supports.
  (Careful: <code>echotc co</code> is different; it also outputs a number
  but it's the number of columns in the terminal.)  If this is 8
  then probably you have the named colours and nothing more.
<p>
In older versions of the shell you need to find the sequences which
  generate the various colours from the manual for your terminal
  emulator; these are ANSI standard on those I know about which support
  colour.  With a recent (post 3.1.6) distribution of zsh, there is a
  theme system to handle this for you; even if you don't see that, the
  installed function `<code>colors</code>' (meaning `colours', if you're not
  reading this in black and white) gives the escape sequences.  You will
  end up with code looking like this (borrowed from Oliver Kiddle):
  <pre>

    PS1=$'%{\e[1;31m%}&lt;the rest of your prompt here&gt;%{\e[0m%}'
  
</pre>

  The <code>$'</code> form of quoting turns the `<code>\e</code>' into a real escape
  character; this only works from about version 3.1.4, so if you're using
  3.0.x, you need to do something like
  <pre>

    PS1="$(print '%{\e[1;31m%}&lt;the rest goes here&gt;%{\e[0m%}')"
  
</pre>

  The `<code>%{...%}</code>' is used in prompts for strings which will
  not appear as characters, so that the prompt code doesn't miscalculate the
  length of the prompt which would have a bad effect on editing.  The
  resulting `<code>&lt;ESC&gt;[1;31m</code>' makes the prompt red, and the
  `<code>&lt;ESC&gt;[0m</code>' puts printing back to normal so that the rest of the line
  is unchanged.
<p>
<a name="l44"></a>
<h2>3.26: Why is my output duplicated with `<code>foo 2&gt;&amp;1 &gt;foo.out | bar</code>'?</h2>
<p>
This is a slightly unexpected effect of the option <code>MULTIOS</code>, which is
  set by default.  Let's look more closely:
  <pre>

    foo 2&gt;&amp;1 &gt;foo.out | bar
  
</pre>

  What you're probably expecting is that the command <code>foo</code> sends its
  standard output to the pipe and so to the input of the command <code>bar</code>,
  while it sends its standard error to the file <code>foo.out</code>.  What you
  actually see is that the output is going both to the pipe and into the
  file.  To be more explicit, here's the same example with real commands:
  <pre>

    % { print output; print error &gt;&amp;2 } 2&gt;&amp;1 &gt;foo.out | sed 's/error/erratic/'
    erratic
    output
    % cat foo.out
    output
  
</pre>

  and you can see `<code>output</code>' appears twice.
<p>
It becomes clearer what's going on if we write:
  <pre>

    % print output &gt;foo1.out &gt;foo2.out
    % cat foo1.out
    output
    % cat foo2.out
    output
  
</pre>

  You might recognise this as a standard feature of zsh, called `<code>multios</code>'
  and controlled by the option of the same name, whereby output is copied
  to both files when the redirector appears twice.  What's going on in the
  first example is exactly the same, however the second redirector is
  disguised as a pipe.  So if you want to turn this effect off, you need
  to unset the option <code>MULTIOS</code>, or alternatively write the following:
  <pre>

    % { print output; print error &gt;&amp;2 } 2&gt;&amp;1 &gt;&amp;- &gt;foo.out | sed 's/error/erratic/'
    erratic
  
</pre>

  By closing stdout with <code>&gt;&amp;-</code>, we're cancelling the previous redirections
  (to the pipe) and start anew with <code>&gt;foo.out</code> instead of adding it as a
  redirection target to stdout.
<p>
<a name="l45"></a>
<h2>3.27: What are these `^' and `~' pattern characters, anyway?</h2>
<a name="327"></a>
<p>
The characters <code>^</code> and <code>~</code> are active when the option
  <code>EXTENDED_GLOB</code> is set.  Both are used to exclude patterns, i.e.  to
  say `match something other than ...'.  There are some confusing
  differences, however.  Here are the descriptions for <code>^</code> and <code>~</code>.
<p>
<code>^</code> means `anything except the pattern that follows'.  You can
  think of the combination <code>^</code><em>pat</em> as being like a <code>*</code> except
  that it doesn't match <em>pat</em>.  So, for example, <code>myfile^.txt</code>
  matches anything that begins with <code>myfile</code> except <code>myfile.txt</code>.
  Because it works with patterns, not just strings, <code>myfile^*.c</code>
  matches anything that begins with <code>myfile</code> unless it ends with
  <code>.c</code>, whatever comes in the middle --- so it matches <code>myfile1.h</code>
  but not <code>myfile1.c</code>.
<p>
Also like <code>*</code>, <code>^</code> doesn't match across directories if you're
  matching files when `globbing', i.e. when you use an unquoted pattern
  in an ordinary command line to generate file names.  So
  <code>^dir1/^file1</code> matches any subdirectory of the current directory
  except one called <code>dir1</code>, and within any directory it matches it
  picks any file except one called <code>file1</code>.  So the overall pattern
  matches <code>dir2/file2</code> but not <code>dir1/file1</code> nor <code>dir1/file2</code> nor
  <code>dir2/file1</code>.  (The rule that all the different bits of the pattern
  must match is exactly the same as for any other pattern character,
  it's just a little confusing that what <em>does</em> match in each bit is
  found by telling the shell <em>not</em> to match something or other.)
<p>
As with any other pattern, a <code>^</code> expression doesn't treat the
  character `<code>/</code>' specially if it's not matching files, for example
  when pattern matching in a command like <code>[[ $string = ^pat1/pat2 ]]</code>.
  Here the whole string <code>pat1/pat2</code> is treated as the argument that
  follows the <code>^</code>.  So anything matches but that one string
  <code>pat1/pat1</code>.
<p>
It's not obvious what something like <code>[[ $string = ^pat1^pat2 ]]</code>
  means.  You won't often have cause to use it, but the rule is that
  each <code>^</code> takes <em>everything</em> that follows as an argument (unless
  it's already inside parentheses --- I'll explain this below).  To see
  this more clearly, put those arguments in parentheses: the pattern is
  equivalent to <code>^(pat1^(pat2))</code>. where now you can see exactly what
  each <code>^</code> takes as its argument.  I'll leave it as an exercise for
  you to work out what this does and doesn't match.
<p>
<code>~</code> is always used between two patterns --- never right at the
  beginning or right at the end.  Note that the other special meaning of
  <code>~</code>, at the start of a filename to refer to your home directory or
  to another named directory, doesn't require the option
  <code>EXTENDED_GLOB</code> to be set.  (At the end of an argument <code>~</code> is
  never special at all.  This is useful if you have Emacs backup files.)
  It means `match what's in front of the tilde, but only if it doesn't
  match what's after the tilde'.  So <code>*.c~f*</code> matches any file
  ending in <code>.c</code> except one that begins with <code>f</code>.  You'll see that,
  unlike <code>^</code>, the parts before and after the <code>~</code> both refer
  separately to the entire test string.
<p>
For matching files by globbing, <code>~</code> is the only globbing operator
  to have a lower precedence than <code>/</code>.  In other words, when you
  have <code>/a/path/to/match~/a/path/not/to/match</code> the <code>~</code> considers
  what's before as a complete path to a file name, and what's after as a
  pattern to match against that file.  You can put any other pattern
  characters in the expressions before and after the <code>~</code>, but as I
  said the pattern after the <code>~</code> is really just a single pattern to
  match against the name of every file found rather than a pattern to
  generate a file.  That means, for example, that a <code>*</code> after the
  <code>~</code> <em>will</em> match a <code>/</code>.  If that's confusing, you can think of
  how <code>~</code> works like this: take the pattern on the left, use it as
  normal to make a list of files, then for each file found see if it
  matches the pattern on the right and if it does take that file out of
  the list.  Note, however, that this removal of files happens
  immediately, before anything else happens to the file list --- before
  any glob qualifiers are applied, for example.
<p>
One rule that is common to both <code>^</code> and <code>~</code> is that they can
  be put inside parentheses and the arguments to them don't extend past
  the parentheses.  So <code>(^README).txt</code> matches any file ending in
  <code>.txt</code> unless the string before that was <code>README</code>, the same as
  <code>*.txt~README.txt</code> or <code>(*~README).txt</code>.  In fact, you can
  always turn <code>^something</code> into <code>(*~something)</code>, where
  <code>something</code> mustn't contain <code>/</code> if the pattern is being used for
  globbing.
<p>
Likewise, <code>abc(&lt;-&gt;~&lt;10-100&gt;).txt</code> matches a file consisting of
  <code>abc</code>, then some digits, then <code>.txt</code>, unless the digits happen to
  match a number from 10 to 100 inclusive (remember the handy <code>&lt;-&gt;</code>
  pattern for matching integers with optional limits to the range).  So
  this pattern matches <code>abc1.txt</code> or <code>abc200.txt</code> but not
  <code>abc20.txt</code> nor <code>abc100.txt</code> nor even <code>abc0030.txt</code>.  However,
  if you're matching files by globbing note you can't put <code>/</code>s
  inside the parentheses since the groups can't stretch across multiple
  directories.  (You can do that, of course, whenever the character
  <code>/</code> isn't special.)  This means that you need to take care when
  using exclusions across multiple directories; see some examples below.
<p>
You may like to know that from zsh 5.0.3 you can disable any pattern
  character separately.  So if you find <code>^</code> gets in your way and
  you're happy using <code>~</code>, put <code>disable -p "^"</code> in <code>~/.zshrc</code>.
  You still need to turn on <code>EXTENDED_GLOB</code>; the <code>disable</code> command
  only deactivates things that would otherwise be active, you can't
  specially enable something not allowed by the syntax options in effect.
<p>
Here are some examples with files to illustrate the points.  We'll
  assume the option <code>EXTENDED_GLOB</code> is set and none of the pattern
  characters is disabled.
<p>
<ol>
  <li> <code>**/foo~*bar*</code> matches any file called <code>foo</code> in any
     subdirectory, except where <code>bar</code> occurred somewhere in the path.
     For example, <code>users/barstaff/foo</code> will be excluded by the <code>~</code>
     operator.  As the <code>**</code> operator cannot be grouped (inside
     parentheses it is treated as <code>*</code>), this is one way to exclude some
     subdirectories from matching a <code>**</code>.  Note that this can be quite
     inefficient because the shell performs a complete search for
     <code>**/foo</code> before it uses the pattern after the <code>~</code> to exclude
     files from the match.  The file is excluded if <code>bar</code> occurs
     <em>anywhere</em>, in any directory segment or the final file name.
  <li> The form <code>(^foo/)#</code> can be used to match any hierarchy of
     directories where none of the path components is <code>foo</code>.  For
     example, <code>(^CVS/)#</code> selects all subdirectories to any depth
     except where one component is named <code>CVS</code>.  (The form
     <code>(pat/)#</code> is very useful in other cases; for example,
     <code>(../)#.cvsignore</code> finds the file <code>.cvsignore</code> if it exists
     in the current directory or any parent.)
  </ol>
<p>
<a name="l46"></a>
<h2>3.28: How do I edit the input buffer in $EDITOR?</h2>
<a name="328"></a>
<p>
When typing a long command interactively, it's possible to edit it in $EDITOR
  before execution by using the <code>edit-command-line</code> ZLE widget.  For example,
  after putting
  <pre>

    autoload -U edit-command-line; 
    zle -N edit-command-line; 
    bindkey '^Fc' edit-command-line;
  
</pre>

  in your <code>~/.zshrc</code>, typing <code>^F c</code> will open the entered-so-far
  command-line for editing.  The command will not be automatically executed;
  quitting the editor will only return to zsh's command-line editing mode.
<p>
<a name="l47"></a>
<h2>3.29: Why does `which' output for missing commands go to stdout?</h2>
<p>
The issue is that if you run:
  <pre>

    which non-existent-command
  
</pre>

  the error message goes, unusually, to standard output rather than
  to standard error.  Other shells send this message to standard error,
  as they would if the command was about to be executed but could not be
  found.
<p>
The original reason for this is that this behaviour is inherited from
  previous versions of `<code>which</code>', a builtin in later versions of csh,
  the C shell, as well as tcsh, an adaptation of the C Shell with better
  editing, and is also available as a separate script sometimes still
  found in certain distributions.  Other shells had equivalent commands,
  `<code>whence</code>' and `<code>type</code>, that zsh has also adopted.  So in fact
  this has always been a feature of `<code>which</code>'.  (It would be possible
  to change this in emulation modes; however, so far this possibility
  has been seen as more of an additional confusion than a help.)
<p>
If you want some further rationalisation, you might note that
  `<code>which</code>' is designed as a way of outputting information about a
  command.  So `this command can be found in ...' and `this command
  can't be found' are both bits of information here, unlike the case
  where the command is to be executed.  So although it differs from
  other Bourne-style shells it is in fact self-consistent.  Note that
  the exit status does reflect the fact the command can't be found.
<p>
<a name="l48"></a>
<h2>3.30: Why doesn't the expansion <code>*.{tex,aux,pdf}</code> do what I expect?</h2>
<p>
Based on the behaviour of some other shells, you might guess that the
  following expression:
  <pre>

    echo *.{tex,aux,pdf}
  
</pre>

  would be the way to echo any files ending in <code>.tex</code>, <code>.aux</code> or
  <code>.pdf</code> in the current directory.  Depending on your settings for
  matching (see <a href="zshfaq02.html#21">2.1</a>, in particular <code>NO_NOMATCH</code>), you may
  see something else, in particular an error about (say) <code>*.aux</code> if
  there were no files ending <code>.aux</code>.
<p>
The reason for this is that the brace expansion isn't actually
  a form of pattern matching.  Instead, the line above is equivalent to
  <pre>

    echo *.tex *.aux *.pdf
  
</pre>

  giving you three separate patterns.  With the default <code>NOMATCH</code>
  behaviour in effect, any pattern that fails to match is an error.
<p>
However, there <em>is</em> a way of doing exactly what you want, using
  parentheses instead of braces:
  <pre>

    echo *.(tex|aux|pdf)
  
</pre>

  This is now a pattern matching expression, so is considered as a
  single pattern.  Now any file that exists will suppress the
  <code>NOMATCH</code> behaviour, but you'll still get all the files that do
  match.
<p>
This use of parentheses is special to zsh.  Modern Bourne-like shells
  have a syntax like this, too, but with an <code>@</code> in front of the
  parentheses: again, see <a href="zshfaq02.html#21">2.1</a>, and search for <code>@(</code>.
  This is harder for the user to remember but easier for the shell to
  parse!
<p>
<hr>
<ul>
    <li> <a href="zshfaq.html">Table of Contents</a>
    <li> <a href="zshfaq02.html">Previous Chapter</a>
    <li> <a href="zshfaq04.html">Next Chapter</a>
</ul>
<hr>
</body>
</html>
